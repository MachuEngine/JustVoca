<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</title>

<style>
:root {
    --bg-color: #f4f7f6;
    --card-bg: #ffffff;
    --primary-color: #4a90e2;
    --secondary-color: #f39c12;
    --accent-color: #e74c3c;
    --text-main: #2c3e50;
    --text-desc: #5d6d7e;
}

body {
    background: var(--bg-color);
    font-family: 'Pretendard', -apple-system, sans-serif;
    display: flex;
    justify-content: center;
    padding: 30px 0 120px;
    margin: 0;
}

.container {
    width: 360px;
}

/* ì¹´ë“œ ê³µí†µ */
.card {
    background: var(--card-bg);
    border-radius: 25px;
    box-shadow: 0 15px 40px rgba(0,0,0,0.08);
    padding: 25px;
    margin-bottom: 20px;
    border: 1px solid #ebedef;
}

h3 {
    margin: 0;
    color: var(--text-main);
}

.card-desc {
    font-size: 0.85rem;
    color: var(--text-desc);
    margin-top: 6px;
}

/* í†µê³„ */
.stats {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    margin-top: 18px;
}

.stat {
    background: #f8f9fa;
    border-radius: 20px;
    padding: 18px;
    text-align: center;
    cursor: pointer;
}

.stat strong {
    font-size: 1.6rem;
    color: var(--primary-color);
}

.stat span {
    font-size: 0.75rem;
    color: var(--text-desc);
}

/* ê²€ìƒ‰ */
.search-area {
    display: flex;
    gap: 8px;
    width: 85%;
    margin: 15px auto 0;
}

.search-area input {
    flex: 1;
    padding: 10px 14px;
    border-radius: 14px;
    border: 1px solid #dfe4ea;
    font-size: 0.85rem;
}

.search-area button {
    padding: 10px 14px;
    border: none;
    border-radius: 14px;
    background: var(--primary-color);
    color: white;
    font-size: 0.8rem;
    font-weight: 600;
}

/* ì‚¬ìš©ì ë¦¬ìŠ¤íŠ¸ */
.user {
    background: #f9fafb;
    border-radius: 18px;
    padding: 14px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
}

.user.low {
    background: #fff1f0;
    border-left: 5px solid var(--accent-color);
}

.user-info strong {
    font-size: 0.9rem;
}

.user-info small {
    display: block;
    font-size: 0.75rem;
    color: var(--text-desc);
}

.user-actions button {
    border: none;
    border-radius: 10px;
    padding: 6px 8px;
    font-size: 0.7rem;
    font-weight: 600;
    cursor: pointer;
    margin-left: 4px;
}

.reset-btn {
    background: var(--primary-color);
    color: white;
}

.delete-btn {
    background: var(--accent-color);
    color: white;
}

/* ì¼ê´„ ì•Œë¦¼ */
.bulk-btn {
    width: 100%;
    padding: 12px;
    border: none;
    border-radius: 16px;
    background: var(--secondary-color);
    color: white;
    font-weight: 700;
    margin-bottom: 15px;
}

/* ê³µì§€ */
.notice-card select,
.notice-card input,
.notice-card textarea {
    width: 100%;
    border-radius: 14px;
    border: 1px solid #dfe4ea;
    padding: 10px;
    font-size: 0.85rem;
    margin-top: 10px;
}

.notice-card textarea {
    resize: none;
}

.send-btn {
    width: 100%;
    margin-top: 14px;
    padding: 12px;
    border-radius: 16px;
    border: none;
    background: var(--primary-color);
    color: white;
    font-weight: 700;
}

/* ë¡œê·¸ */
.log {
    font-size: 0.8rem;
    padding: 6px 0;
    border-bottom: 1px solid #eee;
}

/* ëª¨ë‹¬ */
.modal-bg {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.45);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 999;
}

.modal {
    width: 300px;
    background: white;
    border-radius: 25px;
    padding: 25px;
    box-shadow: 0 20px 45px rgba(0,0,0,0.2);
}

.modal h3 {
    text-align: center;
}

.modal p {
    font-size: 0.85rem;
    color: var(--text-desc);
    text-align: center;
}

.actions {
    display: flex;
    gap: 10px;
    margin-top: 18px;
}

.actions button {
    flex: 1;
    padding: 12px;
    border-radius: 14px;
    border: none;
    font-weight: 700;
}

.ok {
    background: var(--primary-color);
    color: white;
}

.cancel {
    background: #ecf0f1;
}
</style>
</head>

<body>
<div class="container">

<!-- í†µê³„ -->
<div class="card">
<h3>ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</h3>
<div class="card-desc">ì „ì²´ ì‚¬ìš©ì ë° ì‹œìŠ¤í…œ ê´€ë¦¬</div>
<div class="stats">
<div class="stat" onclick="loadList('all')"><strong>25</strong><span>ì „ì²´</span></div>
<div class="stat" onclick="loadList('student')"><strong>20</strong><span>í•™ìƒ</span></div>
<div class="stat" onclick="loadList('teacher')"><strong>5</strong><span>ì„ ìƒë‹˜</span></div>
<div class="stat" onclick="loadList('inactive')"><strong>8</strong><span>ì¥ê¸° ë¯¸ì ‘ì†</span></div>
</div>
</div>

<!-- ê²€ìƒ‰ -->
<div class="card">
<h3>ì‚¬ìš©ì ê²€ìƒ‰</h3>
<div class="search-area">
<input id="searchInput" placeholder="ì´ë¦„ / ì•„ì´ë””">
<button onclick="applySearch()">ê²€ìƒ‰</button>
</div>
</div>

<!-- ë¦¬ìŠ¤íŠ¸ -->
<div class="card" id="listCard" style="display:none;">
<h3 id="listTitle"></h3>
<button id="bulkBtn" class="bulk-btn" style="display:none" onclick="bulkAlert()">ì¥ê¸° ë¯¸ì ‘ì†ì ì¼ê´„ ì•Œë¦¼</button>
<div id="userList"></div>
</div>

<!-- ê³µì§€ ë°œì†¡ -->
<div class="card notice-card">
<h3>ì „ì²´ ê³µì§€ ë°œì†¡</h3>
<select id="noticeTarget">
<option>ì „ì²´ ì‚¬ìš©ì</option>
<option>í•™ìƒ</option>
<option>ì„ ìƒë‹˜</option>
<option>ì¥ê¸° ë¯¸ì ‘ì†ì</option>
</select>

<select id="sendType">
<option value="now">ì¦‰ì‹œ ë°œì†¡</option>
<option value="reserve">ì˜ˆì•½ ë°œì†¡</option>
</select>

<input type="datetime-local" id="reserveTime" style="display:none">
<textarea id="noticeText" rows="3" placeholder="ê³µì§€ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>
<button class="send-btn" onclick="handleNotice()">ê³µì§€ ë°œì†¡</button>
</div>

<!-- ì´ë ¥ -->
<div class="card">
<h3>ê³µì§€ ë°œì†¡ ì´ë ¥</h3>
<div id="noticeHistory"></div>
</div>

<!-- ë¡œê·¸ -->
<div class="card">
<h3>ê´€ë¦¬ì ë¡œê·¸</h3>
<div id="adminLog"></div>
</div>

</div>

<!-- ëª¨ë‹¬ -->
<div class="modal-bg" id="modalBg">
<div class="modal" id="modal"></div>
</div>

<script>
/*ì „ì²´ ì‚¬ìš©ì ë¦¬ìŠ¤íŠ¸*/
const users=[
 {name:"John",id:"student01",role:"í•™ìƒ",last:2},
 {name:"Emily",id:"student02",role:"í•™ìƒ",last:3},
 {name:"Michael",id:"student03",role:"í•™ìƒ",last:5},
 {name:"Sarah",id:"student04",role:"í•™ìƒ",last:15},
 {name:"David",id:"student05",role:"í•™ìƒ",last:7},
 {name:"Anna",id:"student06",role:"í•™ìƒ",last:14},
 {name:"Luca",id:"student07",role:"í•™ìƒ",last:23},
 {name:"Sophie",id:"student08",role:"í•™ìƒ",last:5},
 {name:"Daniel",id:"student09",role:"í•™ìƒ",last:4},
 {name:"Maria",id:"student10",role:"í•™ìƒ",last:1},
 {name:"Yuki",id:"student11",role:"í•™ìƒ",last:20},
 {name:"Mei",id:"student12",role:"í•™ìƒ",last:13},
 {name:"Lin",id:"student13",role:"í•™ìƒ",last:4},
 {name:"Arun",id:"student14",role:"í•™ìƒ",last:5},
 {name:"Rina",id:"student15",role:"í•™ìƒ",last:21},
 {name:"Ali",id:"student16",role:"í•™ìƒ",last:17},
 {name:"Omar",id:"student17",role:"í•™ìƒ",last:20},
 {name:"Carlos",id:"student18",role:"í•™ìƒ",last:6},
 {name:"Rina",id:"student19",role:"í•™ìƒ",last:9},
 {name:"Diego",id:"student02",role:"í•™ìƒ",last:11},
 {name:"ê¹€ë¯¼ìˆ˜",id:"teacher01",role:"ì„ ìƒë‹˜",last:2},
 {name:"ì´ì§€ì€",id:"teacher02",role:"ì„ ìƒë‹˜",last:3},
 {name:"ë°•ì„œì¤€",id:"teacher03",role:"ì„ ìƒë‹˜",last:10},
 {name:"ì •í˜„ìš°",id:"teacher04",role:"ì„ ìƒë‹˜",last:5},
 {name:"ì‹ ìˆ˜ì•„",id:"teacher05",role:"ì„ ìƒë‹˜",last:19}
];

let keyword="",logs=[],notices=[],currentType="all";

/* ğŸ” ê²€ìƒ‰ ë¡œì§ ê°œì„  */
function applySearch(){
  keyword = searchInput.value.trim();
  loadList("all");
}

/* Enter í‚¤ ê²€ìƒ‰ */
searchInput.addEventListener("keydown",e=>{
  if(e.key==="Enter") applySearch();
});

/* ê²€ìƒ‰ì–´ ì‚­ì œ ì‹œ ìë™ ë³µêµ¬ */
searchInput.addEventListener("input",()=>{
  if(searchInput.value===""){
    keyword="";
    loadList("all");
  }
});

/* ë¡œê·¸ */
function log(msg){
 logs.unshift(`${new Date().toLocaleString()} Â· ${msg}`);
 adminLog.innerHTML=logs.map(l=>`<div class="log">${l}</div>`).join("");
}

/* ì´ë ¥ */
function renderNotices(){
 noticeHistory.innerHTML=notices.map(n=>`
 <div class="log">${n.time} Â· [${n.target}] (${n.status}) ${n.text}</div>`).join("");
}
/* ê³µì§€ */
sendType.onchange=()=>reserveTime.style.display=sendType.value==="reserve"?"block":"none";

function handleNotice(){
 const text=noticeText.value.trim();
 if(!text)return;
 if(sendType.value==="now"){
  notices.unshift({time:new Date().toLocaleString(),target:noticeTarget.value,text,status:"ë°œì†¡ ì™„ë£Œ"});
  log("ê³µì§€ ì¦‰ì‹œ ë°œì†¡");
 }else{
  notices.unshift({time:new Date().toLocaleString(),target:noticeTarget.value,text,status:"ì˜ˆì•½",reserve:reserveTime.value});
  log("ê³µì§€ ì˜ˆì•½ ë“±ë¡");
 }
 renderNotices(); noticeText.value="";
 done("ê³µì§€ ì²˜ë¦¬ ì™„ë£Œ");
}

setInterval(()=>{
 const now=new Date();
 notices.forEach(n=>{
  if(n.status==="ì˜ˆì•½" && new Date(n.reserve)<=now){
   n.status="ë°œì†¡ ì™„ë£Œ"; renderNotices(); log("ì˜ˆì•½ ê³µì§€ ë°œì†¡");
  }
 });
},60000);

/* ì‚¬ìš©ì */
function loadList(type){
 currentType=type;
 listCard.style.display="block";
 listTitle.innerText=type==="inactive"?"ì¥ê¸° ë¯¸ì ‘ì†(2ì£¼) ì‚¬ìš©ì":"ì‚¬ìš©ì ë¦¬ìŠ¤íŠ¸";
 bulkBtn.style.display=type==="inactive"?"block":"none";
 renderList();
}
function applySearch(){ keyword=searchInput.value; renderList(); }
function renderList(){
 userList.innerHTML="";
 users.filter(u=>{
  if(currentType==="inactive" && u.last<=14)return false;
  if(currentType==="student" && u.role!=="í•™ìƒ")return false;
  if(currentType==="teacher" && u.role!=="ì„ ìƒë‹˜")return false;
  if(currentType!=="inactive" && keyword && !u.name.includes(keyword) && !u.id.includes(keyword))return false;
  return true;
 }).forEach(u=>{
  userList.innerHTML+=`
  <div class="user ${u.last>14?"low":""}">
   <div class="user-info">
    <strong>${u.name}</strong>
    <small>${u.role} Â· ${u.last}ì¼ ë¯¸ì ‘ì†</small>
   </div>
   <div class="user-actions">
    <button class="reset-btn" onclick="confirmAction('ë¹„ë°€ë²ˆí˜¸ ì´ˆê¸°í™”','${u.id}')">ì´ˆê¸°í™”</button>
    <button class="delete-btn" onclick="confirmAction('ê³„ì • ì‚­ì œ','${u.id}')">ì‚­ì œ</button>
   </div>
  </div>`;
 });
}

/* ì•Œë¦¼ */
function bulkAlert(){ confirmAction("ì¥ê¸° ë¯¸ì ‘ì†ì ì•Œë¦¼","ì „ì²´"); }
function confirmAction(type,target){
 modal.innerHTML=`
 <h3>${type}</h3><p>${target} ì²˜ë¦¬í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</p>
 <div class="actions">
  <button class="ok" onclick="done('${type} ì™„ë£Œ','${type}')">í™•ì¸</button>
  <button class="cancel" onclick="closeModal()">ì·¨ì†Œ</button>
 </div>`;
 showModal();
}
function done(msg,logMsg){
 modal.innerHTML=`<h3>${msg}</h3><div class="actions"><button class="ok" onclick="closeModal()">í™•ì¸</button></div>`;
 if(logMsg)log(logMsg);
 showModal();
}
function showModal(){modalBg.style.display="flex";}
function closeModal(){modalBg.style.display="none";}
</script>
</body>
</html>
